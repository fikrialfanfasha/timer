<!doctype html>
<html lang="id">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
    <title>Penghitung Waktu Kegiatan - @fikrialfanf</title>
    <style>
        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        :root {
            --bg: #080b15;
            --panel: #12161f;
            --panel-2: #1a1f2d;
            --muted: #4d6b8a;
            --accent: #00ffa3;
            --accent-blue: #0ff4ff;
            --accent-orange: #ff3d71;
            --glass: rgba(66, 228, 255, 0.03);
            --neon-glow: 0 0 20px rgba(0, 255, 163, 0.2);
            --blue-glow: 0 0 25px rgba(15, 244, 255, 0.2);
            --card-radius: 16px;
            --card-padding: 24px;
            font-family: "Inter", "Segoe UI", Roboto, Arial, sans-serif;
        }

        html,
        body {
            height: 100%;
            margin: 0;
            background: radial-gradient(circle at 50% -50%, #1a0b35 0%, #080b15 50%);
            color: #e6eef6;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, var(--accent-blue), var(--accent));
            opacity: 0.7;
            z-index: 1000;
        }

        body::after {
            content: '';
            position: fixed;
            inset: 0;
            background: repeating-linear-gradient(transparent 0%, rgba(0, 255, 163, 0.03) 1px, transparent 2px);
            pointer-events: none;
            z-index: 1;
            opacity: 0.2;
        }

        .wrap {
            max-width: 980px;
            margin: 28px auto;
            padding: 12px
        }

        header {
            display: flex;
            gap: 16px;
            align-items: center;
            margin-bottom: 18px
        }

        .logo {
            width: 56px;
            height: 56px;
            border-radius: 12px;
            background: linear-gradient(135deg, #ff8a9a, #ffb86b);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700
        }

        h1 {
            margin: 0;
            font-size: 32px
        }

        p.lead {
            margin: 4px 0 0;
            color: var(--muted);
            font-size: 14px
        }

        .card {
            background: var(--panel-2);
            border-radius: var(--card-radius);
            padding: var(--card-padding);
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.6),
                       inset 0 0 0 1px rgba(66, 228, 255, 0.1);
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
        }

        .card::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, var(--accent-blue), var(--accent));
            z-index: -1;
            border-radius: calc(var(--card-radius) + 2px);
            opacity: 0.1;
        }

        .topbar {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            gap: 12px;
            flex-wrap: wrap
        }

        .left-title {
            display: flex;
            flex-direction: column
        }

        .title-small {
            color: #7ee1a6;
            font-weight: 700;
            font-size: 18px
        }

        .total {
            color: var(--muted);
            margin-top: 6px
        }

        .controls {
            display: flex;
            gap: 10px;
            align-items: center;
            margin-top: 12px;
            flex-wrap: wrap
        }

        .btn {
            border: 0;
            padding: 12px 18px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 700;
            font-size: 14px;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: 0.5s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn.green {
            background: linear-gradient(90deg, var(--accent), color-mix(in srgb, var(--accent) 80%, white));
            color: #051510;
            box-shadow: 0 0 20px rgba(0, 255, 163, 0.3);
            text-shadow: 0 0 10px rgba(255,255,255,0.5);
        }

        .btn.blue {
            background: linear-gradient(90deg, var(--accent-blue), color-mix(in srgb, var(--accent-blue) 80%, white));
            color: #051510;
            box-shadow: 0 0 20px rgba(15, 244, 255, 0.3);
            text-shadow: 0 0 10px rgba(255,255,255,0.5);
        }

        .btn.orange {
            background: linear-gradient(90deg, var(--accent-orange), color-mix(in srgb, var(--accent-orange) 80%, white));
            color: #051510;
            box-shadow: 0 0 20px rgba(255, 61, 113, 0.3);
            text-shadow: 0 0 10px rgba(255,255,255,0.5);
        }

        .btn.ghost {
            background: rgba(66, 228, 255, 0.05);
            border: 1px solid rgba(66, 228, 255, 0.1);
            color: var(--accent-blue);
            box-shadow: inset 0 0 10px rgba(66, 228, 255, 0.05);
        }

        .btn.red {
            background: linear-gradient(90deg, #ff3d71, #ff5f8f);
            color: #fff;
            box-shadow: 0 0 20px rgba(255, 61, 113, 0.3);
            text-shadow: 0 0 10px rgba(255,255,255,0.5);
        }

        .list {
            margin-top: 18px
        }

        .item {
            display: flex;
            gap: 12px;
            align-items: center;
            padding: 16px;
            background: var(--panel);
            border-radius: 12px;
            margin-bottom: 12px;
            border: 1px solid rgba(66, 228, 255, 0.1);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .item:hover {
            border-color: rgba(66, 228, 255, 0.2);
            transform: translateY(-1px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
        }

        .item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--accent-blue), transparent);
            opacity: 0.2;
        }

        .item input[type=text] {
            flex: 1;
            padding: 12px 16px;
            border-radius: 8px;
            border: 1px solid rgba(66, 228, 255, 0.1);
            background: rgba(8, 11, 21, 0.3);
            color: inherit;
            font-size: 15px;
            transition: all 0.3s ease;
        }

        .item input[type=text]:focus {
            border-color: var(--accent-blue);
            box-shadow: 0 0 15px rgba(15, 244, 255, 0.1);
            outline: none;
        }

        .item input[type=number] {
            width: 110px;
            padding: 12px;
            border-radius: 8px;
            border: 1px solid rgba(66, 228, 255, 0.1);
            background: rgba(8, 11, 21, 0.3);
            color: inherit;
            text-align: center;
            font-weight: 700;
            transition: all 0.3s ease;
        }

        .item input[type=number]:focus {
            border-color: var(--accent);
            box-shadow: 0 0 15px rgba(0, 255, 163, 0.1);
            outline: none;
        }

        .trash {
            width: 38px;
            height: 38px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255, 255, 255, 0.02);
            cursor: pointer
        }

        .bottom-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 12px;
            margin-top: 12px
        }

        .note {
            color: var(--muted);
            font-size: 13px
        }

        /* fullscreen timer overlay (within same page) */
        #timerOverlay {
            position: fixed;
            inset: 0;
            background: linear-gradient(180deg, rgba(3, 7, 10, 0.96), rgba(6, 10, 14, 0.96));
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            padding: 40px
        }

        #timerHeader {
            display: flex;
            align-items: center;
            gap: 18px;
            margin-bottom: 18px
        }

        #timerTitle {
            font-size: 64px;
            font-weight: 700;
            letter-spacing: 2px
        }

        #bigTime {
            font-size: clamp(180px, 25vw, 400px);
            font-weight: 900;
            line-height: 0.85;
            margin: 6px 0;
            color: #ffffff;
            text-shadow: 0 10px 40px rgba(0, 0, 0, 0.7);
        }

        .stats {
            display: flex;
            gap: 50px;
            margin-top: 10px;
            align-items: center
        }

        .stats .block {
            color: var(--muted);
            text-align: center
        }

        .stats .val {
            font-size: 44px;
            color: #e9eef6;
            margin-top: 6px
        }

        #nextLabel {
            margin-top: 4px;
            font-size: 36px;
            font-weight: 800;
            color: #6fcf97;
            text-align: center;
        }

        .timer-controls {
            display: flex;
            gap: 14px;
            margin-top: 28px
        }

        .timer-controls .btn {
            padding: 12px 18px;
            border-radius: 10px;
            font-size: 16px
        }

        /* responsive */
        @media (max-width:1200px) {
            .wrap {
                max-width: 90%;
                margin: 20px auto;
            }
        }

        @media (max-width:900px) {
            #bigTime {
                font-size: 120px;
            }
            #timerTitle {
                font-size: 36px;
            }
            .stats .val {
                font-size: 28px;
            }
            .stats {
                gap: 30px;
            }
            header {
                flex-direction: column;
                text-align: center;
                align-items: center;
            }
            h1 {
                font-size: 28px;
                text-align: center;
            }
            .topbar {
                flex-direction: column;
                align-items: center;
                text-align: center;
            }
            .controls {
                justify-content: center;
                width: 100%;
            }
        }

        @media (max-width:680px) {
            .item {
                flex-direction: column;
                align-items: stretch;
                gap: 10px;
                padding: 12px;
            }
            .item input[type=text] {
                width: 100%;
            }
            .item input[type=number] {
                width: 100%;
            }
            .trash {
                align-self: center;
            }
            .stats {
                flex-direction: column;
                gap: 20px;
            }
            #timerHeader {
                flex-direction: column;
                text-align: center;
            }
            #nextLabel {
                font-size: 24px;
                margin-top: 10px;
            }
            .timer-controls {
                flex-wrap: wrap;
                justify-content: center;
            }
            .timer-controls .btn {
                width: 100%;
            }
        }

        @media (max-width:520px) {
            .wrap {
                padding: 8px;
                margin: 12px auto;
            }
            #bigTime {
                font-size: 72px;
            }
            #timerTitle {
                font-size: 24px;
            }
            .card {
                padding: 15px;
            }
            .bottom-actions {
                flex-direction: column;
                gap: 15px;
                align-items: stretch;
            }
            .bottom-actions > div:first-child {
                display: flex;
                flex-direction: column;
                gap: 8px;
            }
            .bottom-actions button {
                width: 100%;
            }
        }

        @media (max-height: 700px) {
            #timerOverlay {
                padding: 20px;
            }
            #bigTime {
                font-size: min(15vh, 120px);
            }
            .stats {
                margin-top: 5px;
            }
            .timer-controls {
                margin-top: 15px;
            }
        }
    </style>
</head>

<body>
    <div class="wrap">
        <header>
            <div class="logo">⏱</div>
            <div>
                <h1>Penghitung Waktu Kegiatan - @fikrialfanf</h1>
                <p class="lead">
                    Atur waktu kegiatan Anda lalu mulai hitung mundur , otomatis berpindah ke kegiatan
                    berikutnya.
                </p>
            </div>
        </header>
        <div class="card">
            <div class="topbar">
                <div class="left-title">
                    <div class="title-small">Jadwal Kegiatan</div>
                    <div class="total">
                        Total:
                        <span id="totalMinutes" style="color:#6fcf97;font-weight:800">0 menit</span>
                    </div>
                </div>
                <div class="controls">
                    <button class="btn green" id="addBtn">+ Tambah Kegiatan</button>
                    <button class="btn blue" id="startBtn"> Mulai Kegiatan</button>
                    <button class="btn red" id="resetBtn"> Reset</button>
                </div>
            </div>
            <div class="list" id="list"></div>
            <div class="bottom-actions">
                <div style="display:flex;gap:8px">
                    <button class="btn green" id="stopInline" style="display:none">■ Berhenti</button>
                    <button class="btn ghost" id="pauseInline" style="display:none">⏸ Jeda</button>
                    <button class="btn ghost" id="skipInline" style="display:none">⏭ Lewati</button>
                </div>
                <div class="note">@fikrialfanf</div>
            </div>
        </div>
    </div>
    <div id="timerOverlay">
        <div id="timerHeader">
            <div
                style="width:78px;height:78px;background:linear-gradient(135deg,#ff8a9a,#ffb86b);border-radius:14px;display:flex;align-items:center;justify-content:center;font-weight:700">
                ⏱
            </div>
            <div id="timerTitle">Nama Kegiatan</div>
            <div id="nextLabel">Selanjutnya: -</div>
        </div>
        <div id="bigTime">00:00</div>
        <div class="stats">
            <div class="block">
                Sisa Waktu
                <div class="val" id="remainingTotal">00:00</div>
            </div>
            <div class="block">
                Waktu Berjalan
                <div class="val" id="elapsed">00:00</div>
            </div>
        </div>
        <div class="timer-controls">
            <button class="btn ghost" id="pauseBtn">⏸ Jeda</button>
            <button class="btn ghost" id="skipBtn">⏭ Lewati</button>
            <button class="btn red" id="stopBtn">⏹ Berhenti</button>
        </div>
    </div>
    <audio id="ding" src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQAAAAA="></audio>
    <script>
        let activities = [];
        const listEl = document.getElementById('list');
        const addBtn = document.getElementById('addBtn');
        const startBtn = document.getElementById('startBtn');
        const resetBtn = document.getElementById('resetBtn');
        const totalMinutesEl = document.getElementById('totalMinutes');

        const stopInline = document.getElementById('stopInline');
        const pauseInline = document.getElementById('pauseInline');
        const skipInline = document.getElementById('skipInline');

        const overlay = document.getElementById('timerOverlay');
        const bigTime = document.getElementById('bigTime');
        const timerTitle = document.getElementById('timerTitle');
        const remainingTotal = document.getElementById('remainingTotal');
        const elapsedEl = document.getElementById('elapsed');
        const nextLabel = document.getElementById('nextLabel');
        const pauseBtn = document.getElementById('pauseBtn');
        const skipBtn = document.getElementById('skipBtn');
        const stopBtn = document.getElementById('stopBtn');

        const ding = document.getElementById('ding');

        let timer = null;
        let currentIndex = 0;
        let currentRemaining = 0;
        let totalElapsed = 0;
        let paused = false;

        function save() { localStorage.setItem('event_timer_v2', JSON.stringify(activities)); }
        function load() {
            try { const raw = localStorage.getItem('event_timer_v2'); if (raw) activities = JSON.parse(raw); } catch (e) { activities = []; } if (!Array.isArray(activities)) activities = []; if (activities.length === 0) { // seed example if empty
                activities = [
                    { title: 'Pembukaan', minutes: 10 },
                    { title: 'Penjelasan', minutes: 20 },
                    { title: 'Kuis', minutes: 10 },
                    { title: 'Praktik', minutes: 40 },
                    { title: 'Penutup', minutes: 10 }
                ];
                save();
            }
            renderList(); computeTotals();
        }

        function addActivity(title = 'Kegiatan baru', minutes = 5) {
            activities.push({ title, minutes: parseInt(minutes) || 0 });
            save(); renderList(); computeTotals();
        }
        function removeActivity(i) { activities.splice(i, 1); save(); renderList(); computeTotals(); }

        function renderList() {
            listEl.innerHTML = '';
            activities.forEach((a, i) => {
                const it = document.createElement('div'); it.className = 'item';
                const t = document.createElement('input'); t.type = 'text'; t.value = a.title; t.oninput = (e) => { activities[i].title = e.target.value; save(); }
                const n = document.createElement('input'); n.type = 'number'; n.min = 0; n.value = a.minutes; n.oninput = (e) => { activities[i].minutes = parseInt(e.target.value) || 0; save(); computeTotals(); }
                const trash = document.createElement('div'); trash.className = 'trash'; trash.title = 'Hapus'; trash.innerHTML = '🗑'; trash.onclick = () => { if (confirm('Hapus kegiatan ini?')) removeActivity(i); }
                it.appendChild(t); it.appendChild(n); it.appendChild(trash);
                listEl.appendChild(it);
            });
            if (activities.length === 0) {
                const p = document.createElement('div'); p.style.color = 'var(--muted)'; p.style.padding = '18px'; p.textContent = '(Belum ada kegiatan)'; listEl.appendChild(p);
            }
        }

        function computeTotals() {
            const totalMin = activities.reduce((s, a) => s + (parseInt(a.minutes) || 0), 0);
            totalMinutesEl.textContent = totalMin + ' menit';
        }

        function secondsToMMSS(s) {
            if (s < 0) s = 0;
            const m = Math.floor(s / 60); const sec = s % 60; return String(m).padStart(2, '0') + ':' + String(sec).padStart(2, '0');
        }

        function updateOverlayUI() {
            if (currentIndex >= activities.length) {
                endSession();
                return;
            }
            timerTitle.textContent = activities[currentIndex].title || '-';
            bigTime.textContent = secondsToMMSS(currentRemaining);
            elapsedEl.textContent = secondsToMMSS(totalElapsed);
            const remainingTotalSeconds = activities.slice(currentIndex).reduce((acc, a, idx) => acc + ((idx === 0 ? currentRemaining : (a.minutes * 60)) || 0), 0);
            remainingTotal.textContent = secondsToMMSS(remainingTotalSeconds);
            nextLabel.textContent = 'Selanjutnya: ' + (activities[currentIndex + 1] ? activities[currentIndex + 1].title : '(Selesai)');
        }

        function startSession() {
            if (activities.length === 0) { alert('Tambahkan kegiatan terlebih dahulu.'); return; }
            overlay.style.display = 'flex';
            currentIndex = 0; totalElapsed = 0; paused = false;
            currentRemaining = (activities[0].minutes || 0) * 60;
            updateOverlayUI();
            stopInline.style.display = 'inline-block';
            pauseInline.style.display = 'inline-block';
            skipInline.style.display = 'inline-block';
            timer = setInterval(tick, 1000);
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function tick() {
            if (paused) return;
            currentRemaining--; totalElapsed++;
            if (currentRemaining <= 0) {
                playDing();
                currentIndex++;
                if (currentIndex >= activities.length) {
                    updateOverlayUI();
                    return;
                }
                currentRemaining = (activities[currentIndex].minutes || 0) * 60;
            }
            updateOverlayUI();
        }

        function playDing() {
            try {
                const ctx = new (window.AudioContext || window.webkitAudioContext)();
                const osc = ctx.createOscillator();
                const gain = ctx.createGain();

                osc.type = 'triangle';
                osc.frequency.setValueAtTime(1200, ctx.currentTime);
                gain.gain.setValueAtTime(0.5, ctx.currentTime); // lebih besar
                gain.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + 0.4);

                osc.connect(gain);
                gain.connect(ctx.destination);

                osc.start();
                osc.stop(ctx.currentTime + 0.4);
            } catch (e) {
                ding.volume = 1;
                ding.play();
            }
        }

        function pauseToggle() {
            paused = !paused;
            pauseBtn.textContent = paused ? '▶ Lanjut' : '⏸ Jeda';
            pauseInline.textContent = paused ? '▶ Lanjut' : '⏸ Jeda';
        }
        function skipCurrent() {
            playDing();
            currentIndex++;
            if (currentIndex >= activities.length) {
                updateOverlayUI(); return;
            }
            currentRemaining = (activities[currentIndex].minutes || 0) * 60;
            updateOverlayUI();
        }

        function endSession() {
            clearInterval(timer); timer = null;
            timerTitle.textContent = 'Selesai !';
            bigTime.textContent = '00:00';
            nextLabel.textContent = 'Semua kegiatan selesai';
            setTimeout(() => {
                overlay.style.display = 'none';
                stopInline.style.display = 'none';
                pauseInline.style.display = 'none';
                skipInline.style.display = 'none';
                currentIndex = 0; currentRemaining = 0; totalElapsed = 0; paused = false;
                renderList(); computeTotals();
            }, 1300);
        }

        function stopSession() {
            if (!confirm('Berhenti dan kembali ke tampilan awal?')) return;
            clearInterval(timer); timer = null;
            overlay.style.display = 'none';
            stopInline.style.display = 'none';
            pauseInline.style.display = 'none';
            skipInline.style.display = 'none';
            currentIndex = 0; currentRemaining = 0; totalElapsed = 0; paused = false;
            renderList(); computeTotals();
        }

        stopInline.onclick = stopSession;
        pauseInline.onclick = pauseToggle;
        skipInline.onclick = skipCurrent;

        pauseBtn.onclick = pauseToggle;
        skipBtn.onclick = skipCurrent;
        stopBtn.onclick = stopSession;

        addBtn.onclick = () => addActivity('Kegiatan baru', 5);
        startBtn.onclick = startSession;
        resetBtn.onclick = () => {
            if (!confirm('Reset semua jadwal (hapus semua)?')) return;
            activities = []; save(); renderList(); computeTotals();
        };

        document.addEventListener('keydown', (e) => {
            if (e.key === ' ') { e.preventDefault(); pauseToggle(); }
            if (e.key === 'n') skipCurrent();
            if (e.key === 'Escape' && overlay.style.display === 'flex') stopSession();
        });

        load();
        window.activities = activities;
    </script>
</body>

</html>